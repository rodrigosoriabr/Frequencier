var oscs=[],audioctx=[];function createOsc(e){var t=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext);t.createAnalyser();var o=t.createOscillator(),n=t.createStereoPanner(),a=t.createGain();o.type="sine",parseInt(e)>14e3?o.frequency.setValueAtTime(14e3,t.currentTime):o.frequency.setValueAtTime(e,t.currentTime),o.connect(n),n.connect(a),a.connect(t.destination),n.pan.value=0,a.gain.value=1,120>=parseInt(e)&&(a.gain.value=-.5),o.start(),oscs.push(o),audioctx.push(t)}function play(e,t){stop(),t&&(window.speechSynthesis,new SpeechSynthesisUtterance(`Playing ${t}`));var o=e??document.querySelector("#frequencies").value;if(o){document.querySelector("#play").setAttribute("disabled","");var n=o.split(",");for(let a=0;a<n.length;a++){let c=n[a];createOsc(c)}}}function stop(){if(oscs&&oscs.length>0){for(let e=0;e<oscs.length;e++)oscs[e].stop(),audioctx[e].close();oscs=[],audioctx=[],document.querySelector("#play").removeAttribute("disabled")}}function enablePlay(e){document.querySelector("#play").removeAttribute("disabled"),("Enter"===e.key||13===e.keyCode)&&play()}